OpenWrt下实现定时拨号解决寝室断网问题
=====
开学，电信宽带两年的合同也到期了。前些天找电信营业厅办理宽带，竟然被告知只有必须使用天翼客户端才能上网的宽带，这意味着无法使用路由器，是绝对不能接受的。一气之下我跑到了移动营业厅，办理了一个108一年20M的宽带，这个价格确实相当便宜，不过是限时的，一个月折合下来一天只能用12小时，但好处是晚上不断网，回到寝室问了某内部人员才得知，以前办理的那种电信宽带不是没有，而是还没出来，过几天就能办理了。好家伙，这电信老贼确实狡猾！但我转念一想，这108花得也不浪费，由于电信晚上0点至早上6点是断网的，所以我可以用这个移动宽带来填补这段时间。

我的路由器是初代小米路由器mini，官方的固件实在太辣鸡，所以我换成了PandoraBox，这个固件同样是基于OpenWrt，而且相当好用。首先关于网线的连接问题，在LuCI的web界面里面，可以设置虚拟交换机，把小米路由器mini上的两个接口设置为WAN输入即可。然后在web界面的接口中添加一个wan端口设置好协议，输入正确的宽带账号密码。设置好这些之后，在电脑或者手机上使用ssh登录路由器系统，在命令行界面下操作端口的连接与断开可以使用if-up 和if-down命令，用法如下：

```
if-up <interface> #开启
if-down <interface> #关闭
```
---

后来，我们又搬了寝室。新的寝室，哪怕是电信到了晚上都丢包丢得无法接受。不过有一天我无意发现寝室的端口用dhcp连接可以直接接入学校内外，而且竟然可以使用学校的网络接入系统！不过坏处是学生账号不能登录，~~不过这对我来说没有影响~~。当然最令人惊喜的是通过这种途径接入因特网的质量十分稳定，不丢包，而且速度快！此外，学校的网络接入系统的认证十分简陋（另外吐槽一下，学校这个认证都是明文的。。。十分坑爹），可以直接在chrome里边copy as curl command然后丢到路由器里就能完成自动化的认证上网了！
